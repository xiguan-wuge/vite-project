import{_ as w}from"./plugin-vue_export-helper.21dcd24c.js";import{d as D,r as L,g as s,o as E,a as l,c as n,b as x,F as B,e as M,m as p,t as N}from"./index.2e50bfa5.js";const b={key:0,class:"loading"},C={key:1,class:"no-more"},F=D({__name:"pullLoad",setup(H){const g=new Array(100).fill(1).map((e,t)=>t+1);function m(e,t){const o=(e-1)*t,h=o+t,y=g.slice(o,h);return new Promise(k=>{setTimeout(()=>{k(y)},1e3)})}const u=15,f=100,i=L([]),d=s(null),v=s(null),a=s(!1),r=s(!1),c=s(1),_=async e=>{try{a.value=!0;const t=await m(e,u);console.log("items",t),(!t.length||t.length<u)&&(r.value=!0),i.push(...t),a.value=!1}catch(t){console.log("getData-err",t),a.value=!0}};return E(()=>{const e=d.value;v.value,console.log("el",e),e&&e.addEventListener("scroll",()=>{if(e.scrollTop+e.clientHeight>e.scrollHeight-f){if(console.log("\u89E6\u5E95\u4E86"),a.value||r.value)return;c.value+=1,_(c.value)}})}),_(c.value),(e,t)=>(l(),n("div",{class:"wrapper",ref_key:"target",ref:d},[x("div",{class:"content",ref_key:"content",ref:v},[(l(!0),n(B,null,M(i,o=>(l(),n("div",{key:o,class:"item"},N(o),1))),128)),a.value?(l(),n("p",b,"loading...")):p("",!0),r.value?(l(),n("p",C,"no more!")):p("",!0)],512)],512))}});var A=w(F,[["__scopeId","data-v-056e9922"]]);export{A as default};
