import{_ as k}from"./plugin-vue_export-helper.21dcd24c.js";import{d as D,r as L,f as s,o as E,a as l,c as n,b as w,F as x,e as B,l as p,t as M}from"./index.1b73f85f.js";const N={key:0,class:"loading"},C={key:1,class:"no-more"},v=15,F=100,H=D({__name:"pullLoad",setup(T){const f=new Array(100).fill(1).map((e,t)=>t+1);function g(e,t){const o=(e-1)*t,m=o+t,h=f.slice(o,m);return new Promise(y=>{setTimeout(()=>{y(h)},1e3)})}const u=L([]),i=s(null),_=s(null),a=s(!1),r=s(!1),c=s(1),d=async e=>{try{a.value=!0;const t=await g(e,v);console.log("items",t),(!t.length||t.length<v)&&(r.value=!0),u.push(...t),a.value=!1}catch(t){console.log("getData-err",t),a.value=!0}};return E(()=>{const e=i.value;_.value,console.log("el",e),e&&e.addEventListener("scroll",()=>{if(e.scrollTop+e.clientHeight>e.scrollHeight-F){if(console.log("\u89E6\u5E95\u4E86"),a.value||r.value)return;c.value+=1,d(c.value)}})}),d(c.value),(e,t)=>(l(),n("div",{class:"wrapper",ref_key:"target",ref:i},[w("div",{class:"content",ref_key:"content",ref:_},[(l(!0),n(x,null,B(u,o=>(l(),n("div",{key:o,class:"item"},M(o),1))),128)),a.value?(l(),n("p",N,"loading...")):p("",!0),r.value?(l(),n("p",C,"no more!")):p("",!0)],512)],512))}});var A=k(H,[["__scopeId","data-v-056e9922"]]);export{A as default};
